<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>–ú–µ–º-–±–∞—Ç—Ç–ª</title>
  <!-- cache-bust (mobile browsers can be aggressive) -->
  <link rel="stylesheet" href="./style.css?v=0.1.18"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bungee&display=swap" rel="stylesheet">
</head>
<body>
  <!-- ================================================================
       Meme‚ÄëBattle ‚Äî HTML MAP (–±—ã—Å—Ç—Ä—ã–µ —è–∫–æ—Ä—è –ø–æ–∏—Å–∫–∞)
       - [ANCHOR] MB:HTML:SCREEN_MODE
       - [ANCHOR] MB:HTML:SCREEN_HOST
       - [ANCHOR] MB:HTML:HOST_VIEW_SETUP / HOST_VIEW_ROUND / HOST_VIEW_VOTING
       - [ANCHOR] MB:HTML:SCREEN_PLAYER
       - [ANCHOR] MB:HTML:SCREEN_ADMIN
       - [ANCHOR] MB:HTML:DEBUG_PANEL
       - [ANCHOR] MB:HTML:WINNER_OVERLAY
       ================================================================ -->

  <div class="bg"></div>

  <!-- [ANCHOR] MB:HTML:PLAYER_TIMER_PILL ‚Äî yellow pill timer for player screens -->
  <div id="player-round-timer" class="hostRoundTimer playerRoundTimer ok hidden" aria-label="Round timer">0</div>

  <div class="wrap">
    <header class="header">
      <div class="row headerRow">
        <h1>–ú–µ–º-–±–∞—Ç—Ç–ª</h1>
        <div class="pill" id="app-version">beta</div>
      </div>
      <p class="sub">–û–¥–Ω–∞ —Å—Å—ã–ª–∫–∞ ‚Äî –∏ —Å–µ—Ä–≤–µ—Ä, –∏ —Ñ—Ä–æ–Ω—Ç. –í–µ–¥—É—â–∏–π –Ω–∞ –ü–ö, –∏–≥—Ä–æ–∫–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö.</p>
    </header>

    <main class="card">
      <section id="screen-mode" class="screen roleSelectionStage">
        <div class="roleTopRight">
          <button id="btn-fullscreen" class="roleFsBtn" type="button" aria-label="Toggle fullscreen" title="Fullscreen">
            <!-- simple maximize icon -->
            <svg class="roleFsIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M8 3H5a2 2 0 0 0-2 2v3"/>
              <path d="M16 3h3a2 2 0 0 1 2 2v3"/>
              <path d="M8 21H5a2 2 0 0 1-2-2v-3"/>
              <path d="M16 21h3a2 2 0 0 0 2-2v-3"/>
            </svg>
          </button>

          <div class="roleLangPill">üåê EN</div>
        </div>

        <div class="roleTitleBlock">
          <div class="roleGameTitle">MEME BATTLE üî•</div>
          <div class="roleTitleLine" aria-hidden="true"></div>
        </div>

        <div class="roleSubtitle">
          One link ‚Äî one game. Host on PC, players on phones.
        </div>

        <div class="roleSectionTitle">Choose your role</div>

        <div class="roleButtons" role="group" aria-label="Choose your role">
          <button id="btn-mode-host" class="roleBtn roleBtnHost" type="button">
            <div class="roleBtnPattern roleBtnPatternHost" aria-hidden="true"></div>
            <div class="roleBtnShine" aria-hidden="true"></div>

            <div class="roleBtnContent">
              <!-- monitor icon -->
              <svg class="roleBtnIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <rect x="2" y="3" width="20" height="14" rx="2"/>
                <path d="M8 21h8"/>
                <path d="M12 17v4"/>
              </svg>
              <div class="roleBtnLabel">HOST</div>
            </div>

            <div class="roleBtnCorner roleBtnCornerHost" aria-hidden="true"></div>
          </button>

          <button id="btn-mode-player" class="roleBtn roleBtnPlayer" type="button">
            <div class="roleBtnPattern roleBtnPatternPlayer" aria-hidden="true"></div>
            <div class="roleBtnShine" aria-hidden="true"></div>

            <div class="roleBtnContent">
              <!-- smartphone icon -->
              <svg class="roleBtnIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <rect x="7" y="2" width="10" height="20" rx="2"/>
                <path d="M11 18h2"/>
              </svg>
              <div class="roleBtnLabel">PLAYER</div>
            </div>

            <div class="roleBtnCorner roleBtnCornerPlayer" aria-hidden="true"></div>
          </button>
        </div>

        <!-- Decorative elements (hidden on mobile) -->
        <div class="roleDecor roleDecorCircle" aria-hidden="true"></div>
        <div class="roleDecor roleDecorSquare" aria-hidden="true"></div>
        <div class="roleDecor roleDecorDiamond" aria-hidden="true"></div>

        <!-- –°–∫—Ä—ã—Ç–æ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤, –æ—Å—Ç–∞–≤–ª—è–µ–º –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –∫–æ–¥/–æ—Ç–ª–∞–¥–∫—É -->
        <button id="btn-mode-admin" class="ghost hidden" type="button">Admin (–ø–∞–Ω–µ–ª—å)</button>
      </section>

      <section id="screen-host" class="screen hidden">
  <!-- HOST: Setup (screen 2) -->
  <div id="host-view-setup" class="hostSetup">
    <div class="hostSetupHeader">
      <div class="hostBadgeWrap">
        <div class="hostBadge">HOST</div>
        <div class="hostOnline">
          <span class="wifiDot" aria-hidden="true"></span>
          <span class="hostOnlineText">Online</span>
        </div>
      </div>
      <div class="pill" id="host-conn">offline</div>
    </div>

    <div class="hostSetupGrid">
      <!-- LEFT -->
      <div class="hostSetupCol">
        <div id="host-room-pre" class="panel setupPanel">
          <button id="host-create-room" class="createBig" type="button">CREATE ROOM</button>
        </div>

        <div id="host-setup-steps" class="panel setupPanel stepsPanel">
          <div class="stepsList">
            <div class="stepRow"><span class="stepBadge">1</span><span>Create a room</span></div>
            <div class="stepRow"><span class="stepBadge">2</span><span>Invite friends</span></div>
            <div class="stepRow"><span class="stepBadge">3</span><span>Choose number of rounds</span></div>
            <div class="stepRow"><span class="stepBadge">4</span><span>Pick themes and start the game</span></div>
          </div>
        </div>

        <div id="host-room-post" class="hidden">
          <div class="panel setupPanel roomCodePanel">
            <div class="muted tinyUpper">Room Code</div>
            <div class="roomCodeRow">
              <div class="roomCodeBig" id="host-room-code">‚Äî</div>
              <button id="host-copy-code" class="ghost copyMini" type="button" title="Copy">Copy</button>
            </div>
          </div>

          <div class="panel setupPanel joinPanel">
            <div class="grid2 joinGrid">
              <div>
                <div class="muted tinyUpper">Join Link</div>
                <div class="copyLine">
                  <input id="host-room-link-input" class="monoInput" type="text" readonly value=""/>
                  <button id="host-copy-link" class="secondary copyMini" type="button">Copy</button>
                </div>

                <!-- keep legacy link field for compatibility -->
                <div class="muted hidden" id="host-room-link"></div>

                <div class="muted tinyUpper" style="margin-top:12px">Connected Players</div>
                <div id="host-players-setup" class="list"></div>
                <div class="muted" id="host-players-hint">Players can scan to join</div>
              </div>

              <div class="qrSide">
                <div class="muted tinyUpper">QR Code</div>
                <div class="qrCard">
                  <img id="host-qr-img" alt="QR" class="qrimg" />
                  <button id="host-qr-full" class="qrMax" type="button" disabled title="Full screen">‚§¢</button>
                </div>
                <div class="muted qrhint">Scan to join: <span id="host-room-code-mini">‚Äî</span></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="hostSetupCol">
        <div class="panel setupPanel gameSetupPanel">
          <div class="row" style="justify-content:space-between; align-items:flex-end">
            <div>
              <div class="setupTitle">Game Setup</div>
              <div class="muted">Configure your game</div>
            </div>
          </div>

          <div class="setupSection">
            <div class="row" style="justify-content:space-between; gap:12px; flex-wrap:wrap">
              <label class="inlineLabel">Number of Rounds</label>
              <input id="host-total-rounds" class="smallNum" type="number" min="1" max="20" value="5"/>
            </div>
            <input id="host-total-rounds-range" type="range" min="1" max="20" step="1" value="5" />
          </div>

          <div class="setupSection">
            <div class="row" style="justify-content:space-between">
              <div class="row" style="gap:10px">
                <label class="inlineLabel" style="margin:0">Enable AI Tasks</label>
                <div class="pill" id="ai-status">–≤—ã–∫–ª</div>
              </div>

              <label class="switch" style="margin:0">
                <input id="ai-enabled" type="checkbox" />
                <span class="sw"></span>
              </label>
            </div>

            <div id="ai-controls" class="aiControls hidden">
              <div class="setupSubSection">
                <div class="row" style="justify-content:space-between; gap:12px">
                  <label class="inlineLabel" style="margin:0">–£—Ä–æ–≤–µ–Ω—å –∂—ë—Å—Ç–∫–æ—Å—Ç–∏ —é–º–æ—Ä–∞</label>
                  <div class="edgeVal"><span id="ai-edge-val">50%</span></div>
                </div>
                <input id="ai-edge" type="range" min="0" max="4" step="1" value="2" />
                <div class="muted">0 = 0+ (family), 4 = –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç—ë–º–Ω–æ (–±–µ–∑ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω–æ–≥–æ)</div>
</div>

              <div class="setupSubSection">
                <div class="row" style="justify-content:space-between; gap:10px; align-items:center">
                  <label class="inlineLabel" style="margin:0">Themes</label>
                  <div class="muted">Selected: <b id="ai-themes-count">0</b>/<b id="ai-themes-limit">5</b></div>
                </div>

                <div class="themesSelected">
                  <div id="ai-selected" class="themesSelectedInner"></div>
                  <div id="ai-no-themes" class="muted">No themes selected</div>
                </div>

                <button id="ai-browse-btn" class="ghost browseBtn" type="button">
                  Browse themes <span id="ai-browse-chev" class="chev">‚ñæ</span>
                </button>

                <div id="ai-browse-panel" class="browsePanel hidden">
                  <div class="searchLine">
                    <span class="searchIcon" aria-hidden="true">üîé</span>
                    <input id="ai-theme-search" type="text" placeholder="Search themes..." />
                  </div>
                  <div id="ai-themes" class="themeGrid"></div>
                  <div id="ai-themes-empty" class="muted hidden" style="margin-top:8px">No themes found</div>
                  <div class="muted" style="margin-top:8px">Select themes for AI-generated tasks</div>
                </div>

                <!-- optional legacy controls (hidden) -->
                <input id="ai-custom-theme" class="hidden" aria-hidden="true" type="text" />
                <button id="ai-add-theme" class="hidden" aria-hidden="true" type="button"></button>
                <button id="ai-clear-themes" class="hidden" aria-hidden="true" type="button"></button>
                <button id="ai-random-themes" class="hidden" aria-hidden="true" type="button"></button>
              </div>

              <div class="setupSubSection">
                <label class="inlineLabel">Custom Prompt / Tasks</label>
                <div class="copyLine">
                  <textarea id="setup-custom-input" rows="1" placeholder="e.g., 'Medieval Fantasy' or custom task"></textarea>
                  <button id="setup-custom-add" class="secondary copyMini" type="button" disabled>Ôºã</button>
                </div>
                <div class="muted">Press Enter or click Add to include a custom task</div>

                <div id="setup-custom-list" class="customList"></div>

                <!-- hidden legacy tasks textarea used by the game -->
                <textarea id="host-tasks" class="hidden" rows="6"></textarea>
              </div>

              <div class="setupSubSection">
                <div class="btns" style="gap:10px; flex-wrap:wrap">
                  <button id="ai-generate" class="primary" type="button" disabled>Generate Tasks</button>
                  <button id="ai-to-textarea" class="secondary hidden" type="button" disabled>–ü–æ–∫–∞–∑–∞—Ç—å –≤ –ø–æ–ª–µ –∑–∞–¥–∞–Ω–∏–π</button>
                </div>
                <div class="muted" id="ai-usage"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom start button -->
    <div class="hostSetupBottom">
      <button id="host-start-game" class="startBig" type="button" disabled>START GAME</button>
    </div>
  </div>

  <!-- HOST: Round (screen 3) -->
    <!-- [ANCHOR] MB:HTML:HOST_VIEW_ROUND -->
<div id="host-view-round" class="hostRound hidden">
    <div class="hostRoundInner">
      <div class="hostRoundTaskCard">
        <div class="hostRoundTop">
          <div id="host-round-indicator" class="hostRoundIndicator">ROUND 1 / 5</div>
          <div id="host-round-timer" class="hostRoundTimer ok">02:00</div>
        </div>
        <div id="host-round-wait" class="hostRoundWait hidden">Waiting for other players‚Ä¶</div>
        <div id="host-round-theme" class="hostRoundTheme">‚Äî</div>
      </div>

      <div class="hostRoundProg">
        <div class="hostRoundProgTitle">SUBMISSIONS</div>
        <div class="hostRoundProgRow">
          <div class="hostRoundStat sent"><span class="dot green"></span><span>Sent: <b id="host-round-sent">0</b></span></div>
          <div class="hostRoundSep"></div>
          <div class="hostRoundStat miss"><span class="dot yellow pulse"></span><span>Missing: <b id="host-round-missing">0</b></span></div>
        </div>
        <div class="hostRoundBar"><div id="host-round-bar" class="hostRoundBarFill" style="width:0%"></div></div>
        <div id="host-round-total" class="hostRoundTotal">0/0 total</div>
      </div>
    </div>

    <!-- Decorative shapes (desktop only) -->
    <div class="hostRoundDeco decoTL"></div>
    <div class="hostRoundDeco decoBR"></div>
    <div class="hostRoundDeco decoML"></div>
    <div class="hostRoundDeco decoMR"></div>
  </div>

  <!-- HOST: Voting (screen 4) -->
    <!-- [ANCHOR] MB:HTML:HOST_VIEW_VOTING -->
<div id="host-view-voting" class="hostVoting hidden">
    <!-- Timer (yellow pill like Task screen) -->
    <div id="host-vote-timer" class="hostRoundTimer ok hostVoteTimerPill" aria-label="Voting timer">
      00:30
    </div>

    <!-- Scrollable content (auto-scroll enabled when needed) -->
    <div id="host-vote-scroll" class="hostVoteScroll">
      <div class="hostVoteTop">
        <div id="host-vote-title" class="hostVoteTitle">VOTING TIME</div>
      </div>

      <div class="hostVoteThemeBlock">
        <div class="hostVoteThemeLabel">THEME</div>
        <div class="hostVoteThemeCard">
          <div id="host-vote-theme" class="hostVoteThemeText">‚Äî</div>
        </div>
      </div>

      <!-- [ANCHOR] MB:HOST_VOTE:MINI_STATUS -->
      <div class="hostVoteMiniHUD">
        <div id="host-vote-mini-stats" class="hostVoteMiniStats">‚Äî</div>
        <div class="hostVoteMiniActions">
          <button id="host-vote-force-next" class="secondary" disabled>–°–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥ (—Ö–æ—Å—Ç)</button>
        </div>
        <div id="host-vote-mini-list" class="hostVoteMiniList"></div>
      </div>


      <div id="host-vote-grid" class="hostVoteMasonry"></div>

      <div class="hostVoteStatusWrap">
        <div id="host-vote-status" class="hostVoteStatus">Voting in progress...</div>
      </div>
    </div>
  </div>

  <!-- HOST: Game (old UI preserved) -->
    <!-- [ANCHOR] MB:HTML:HOST_VIEW_GAME_OLD -->
<div id="host-view-game" class="hidden">
    <div class="row">
      <h2>–í–µ–¥—É—â–∏–π</h2>
      <div class="pill" id="host-conn2">offline</div>
    </div>

    <div class="panel">
      <div class="btns">
        <button id="host-next-round" class="secondary" disabled>–°–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥</button>
        <button id="host-start-vote" class="secondary" disabled>–ù–∞—á–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</button>
        <button id="host-end-game" class="danger" disabled>–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–≥—Ä—É</button>
        <button id="host-new-game" class="secondary hidden">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
      </div>
      <div class="muted" id="host-round-info">–†–∞—É–Ω–¥: ‚Äî</div>
    </div>

    <div class="grid2">
      <div class="panel">
        <h3>–ò–≥—Ä–æ–∫–∏</h3>
        <div id="host-players" class="list"></div>
      </div>

      <div class="panel">
        <h3>–ú–µ–º—ã —Ä–∞—É–Ω–¥–∞</h3>
        <div id="host-memes" class="memes"></div>
        <div class="muted" id="host-phase">–§–∞–∑–∞: ‚Äî</div>
        <div id="host-vote-finished" class="sent hidden">‚úÖ –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ</div>
        <div id="host-ready-next" class="muted hidden">–ì–æ—Ç–æ–≤—ã –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ä–∞—É–Ω–¥—É: 0/0</div>
      </div>
    </div>

    <div class="panel">
      <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h3>
      <div id="host-results" class="results"></div>
    </div>
  </div>
</section>

            <section id="screen-player" class="screen hidden">
        <!-- [ANCHOR] MB:HTML:PLAYER_ROOT ‚Äî redesigned player screens (join + submit + vote) -->
        <div class="playerRoot">
          <!-- Score indicator (optional; hidden if no players/score) -->
          <div class="pScoreWrap hidden" id="player-score-wrap">
            <button id="player-score-btn" class="pScoreBtn" type="button" title="Leaderboard">
              <span class="pScoreIcon">üèÜ</span>
              <span id="player-score-value" class="pScoreValue">0</span>
            </button>
            <div id="player-leaderboard" class="pLeaderboard hidden"></div>
          </div>

          <!-- Settings -->
          <button id="player-settings-btn" class="pSettingsBtn" type="button" title="Settings">‚öôÔ∏è</button>
          <div id="player-settings-overlay" class="pSettingsOverlay hidden" role="dialog" aria-modal="true">
            <div class="pSettingsCard">
              <div class="pSettingsTitle">SETTINGS</div>
              <div class="pSettingsRow"><span>Status</span><b id="player-settings-status">OFFLINE</b></div>
              <div class="pSettingsRow"><span>Room</span><b id="player-settings-room">‚Äî</b></div>
              <div class="pSettingsBtns">
                <button id="player-settings-reconnect" class="primary" type="button">Reconnect</button>
                <button id="player-settings-close" class="ghost" type="button">Close</button>
              </div>

              <!-- Legacy connection pill target (kept for existing logic) -->
              <div id="player-conn" class="pill hidden">offline</div>
            </div>
          </div>

          <div class="playerInner">
            <!-- JOIN VIEW -->
            <div id="player-view-join" class="pJoinView">
              <div class="pJoinHeader">
                <div class="pJoinTitle">Join a room</div>
                <div class="pJoinSub">Enter the room code from the host screen</div>
              </div>

              <div class="pJoinForm">
                <label class="pLabel" for="player-room">ROOM CODE</label>
                <div class="pRoomCodeWrap" id="player-room-field">
                  <input id="player-room" class="pInput pInputCode" maxlength="12" placeholder="Enter room code" autocomplete="off" />
                  <button id="player-qr-btn" class="pQrBtn" type="button" title="Scan QR code">‚åÅ</button>
                </div>
                <div id="player-join-error" class="pError hidden"></div>
                <div class="pHint">You can scan the QR from the host screen</div>

                <label class="pLabel" for="player-nick">YOUR NAME</label>
                <input id="player-nick" class="pInput" maxlength="20" placeholder="Your name" autocomplete="off" />
                <div class="pCount" id="player-nick-count">0/20</div>

                <button id="player-join" class="pJoinBtn hidden" type="button">JOIN ROOM</button>
                <div class="pJoinStatus" id="player-join-status"></div>
              </div>
            </div>

            <!-- GAME VIEW (submit / vote / final) -->
            <div id="player-view-game" class="pGameView hidden">
              <!-- sticky timer pill (yellow/orange/red) -->
              <div class="pTimerDock">
                <div id="player-timer" class="playerTimerPill hidden">120</div>
              </div>

              <!-- Task card -->
              <div class="pTaskCard">
                <div class="pTaskTop">
                  <div id="player-round-label" class="pTaskRound">ROUND ‚Äî</div>
                  <div id="player-task-status" class="pTaskStatus">Waiting for host to start the round</div>
                </div>
                <div id="player-task" class="pTaskTitle">‚Äî</div>
              </div>

              <!-- Waiting dots (when round is not active) -->
              <div id="player-waiting" class="pWaiting hidden" aria-label="Waiting">
                <div class="pDot"></div><div class="pDot"></div><div class="pDot"></div>
              </div>

              <!-- SUBMIT PANEL -->
              <div id="player-submit-panel" class="pSubmitPanel">
                <!-- Type chooser -->
                <div id="player-type-chooser" class="pTypeChooser">
                  <button id="player-type-file" class="pTypeBtn" type="button">
                    <div class="pTypeIcon">üìé</div>
                    <div class="pTypeTitle">Attach file</div>
                    <div class="pTypeDesc">Images ¬∑ GIFs ¬∑ Video ¬∑ Audio (JPG, PNG, GIF, MP4, MP3)</div>
                  </button>
                  <button id="player-type-link" class="pTypeBtn" type="button">
                    <div class="pTypeIcon">üîó</div>
                    <div class="pTypeTitle">Add link</div>
                  </button>
                  <button id="player-type-text" class="pTypeBtn" type="button">
                    <div class="pTypeIcon">‚úçÔ∏è</div>
                    <div class="pTypeTitle">Text-Only Meme</div>
                  </button>
                </div>

                <!-- FILE MODE -->
                <div id="player-mode-file" class="pMode hidden">
                  <button class="pBackBtn" id="player-back-file" type="button">‚Üê Back</button>

                  <div class="pCard">
                    <label class="pCardLabel" for="player-meme-url">File URL</label>
                    <input id="player-meme-url" class="pCardInput" placeholder="https://..." autocomplete="off" />
                    <div class="pCardHint">Images ¬∑ GIFs ¬∑ Video ¬∑ Audio (JPG, PNG, GIF, MP4, MP3)</div>

                    <label class="pCardLabel" for="player-meme-file" style="margin-top:14px">Attach file</label>
                    <input id="player-meme-file" class="pCardInput" type="file" accept="image/*,image/gif,video/*,audio/*" />
                    <div class="pCardHint">If file selected ‚Äî URL will be ignored. Limit ~8MB.</div>

                    <img id="player-preview" class="pPreview hidden" alt="Preview" />
                  </div>

                  <div id="player-caption-wrap" class="pCard pCaptionWrap hidden">
                    <label class="pCaptionLabel" for="player-meme-caption">Add caption / comment (optional)</label>
                    <textarea id="player-meme-caption" class="pCaptionInput" rows="3" placeholder="Add a funny caption..."></textarea>
                  </div>
                </div>

                <!-- LINK MODE -->
                <div id="player-mode-link" class="pMode hidden">
                  <button class="pBackBtn" id="player-back-link" type="button">‚Üê Back</button>

                  <div class="pCard">
                    <label class="pCardLabel" for="player-meme-url-link">Paste Link</label>
                    <input id="player-meme-url-link" class="pCardInput" placeholder="https://..." autocomplete="off" />
                    <div class="pCardHint">Direct links to images, GIFs or videos (TikTok, Imgur, Giphy, etc.)</div>

                    <img id="player-preview-link" class="pPreview hidden" alt="Preview" />
                  </div>

                  <div id="player-caption-wrap-link" class="pCard pCaptionWrap hidden">
                    <label class="pCaptionLabel" for="player-meme-caption-link">Add caption / comment (optional)</label>
                    <textarea id="player-meme-caption-link" class="pCaptionInput" rows="3" placeholder="Add a funny caption..."></textarea>
                  </div>
                </div>

                <!-- TEXT MODE (NO COMMENT) -->
                <div id="player-mode-text" class="pMode hidden">
                  <button class="pBackBtn" id="player-back-text" type="button">‚Üê Back</button>

                  <div class="pCard">
                    <label class="pCardLabel" for="player-meme-text">Your Text Meme</label>
                    <textarea id="player-meme-text" class="pCardInput" rows="8" placeholder="Type your meme text here..."></textarea>
                  </div>
                </div>
              </div>

              <!-- Sticky submit -->
              <div id="player-submit-sticky" class="pSubmitSticky hidden">
                <button id="player-send-meme" class="pSubmitBtn" type="button" disabled>SUBMIT MEME</button>
                <div id="player-sent" class="pSent hidden">‚úÖ Meme sent</div>
              </div>

              <!-- VOTE PANEL -->
              <div id="player-vote-panel" class="pVotePanel hidden">
                <div id="player-vote" class="memes"></div>
                <div id="player-voted" class="pSent hidden">‚úÖ Vote counted</div>
                <div id="player-vote-finished" class="pSent hidden">‚úÖ Voting finished</div>
                <div id="player-next-wrap" class="pNextWrap hidden">
                  <button id="player-next-round" class="pSubmitBtn" type="button">READY</button>
                  <div id="player-next-wait" class="muted"></div>
                </div>
              </div>

              <!-- FINAL PANEL -->
              <div id="player-final-panel" class="pFinalPanel hidden">
                <div id="player-final" class="results"></div>
              </div>
            </div>
          </div>

          <!-- QR overlay (mock) -->
          <div id="player-qr-overlay" class="pQrOverlay hidden">
            <div class="pQrCard">
              <div class="pQrBox">
                <div class="pQrBoxText">Camera scanning...</div>
              </div>
              <div class="pQrInstr">Point camera at QR code</div>
              <button id="player-qr-cancel" class="pQrCancel" type="button">Cancel</button>
            </div>
          </div>
        </div>

      </section>

<section id="screen-admin" class="screen hidden">
        <div class="row">
          <h2>–ê–¥–º–∏–Ω</h2>
          <div class="pill" id="admin-conn">offline</div>
        </div>

        <div class="panel">
          <div class="row" style="justify-content:space-between; align-items:flex-end">
            <div style="flex:1">
              <label>Admin token:
                <input id="admin-token" type="password" placeholder="token" autocomplete="off"/>
              </label>
              <div class="muted" id="admin-status"></div>
            </div>
            <div class="btns" style="margin-left:10px">
              <button id="admin-login" class="primary" type="button">–í–æ–π—Ç–∏</button>
              <button id="admin-logout" class="ghost hidden" type="button">–í—ã–π—Ç–∏</button>
              <button id="admin-back" class="secondary" type="button">–ù–∞–∑–∞–¥</button>
            </div>
          </div>
        </div>

        <div id="admin-body" class="hidden">
          <div class="tabs">
            <button class="tabbtn active" data-tab="overview" id="admin-tabbtn-overview">–û–±–∑–æ—Ä</button>
            <button class="tabbtn" data-tab="rooms" id="admin-tabbtn-rooms">–ö–æ–º–Ω–∞—Ç—ã</button>
            <button class="tabbtn" data-tab="sandbox" id="admin-tabbtn-sandbox">–ü–µ—Å–æ—á–Ω–∏—Ü–∞</button>
            <button class="tabbtn" data-tab="logs" id="admin-tabbtn-logs">–õ–æ–≥–∏</button>
          </div>

          <div id="admin-tab-overview" class="tabpane">
            <div class="statgrid" id="admin-stats"></div>

            <div class="grid2" style="margin-top:12px">
              <div class="panel">
                <h3>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h3>
                <div id="admin-activity" class="list"></div>
              </div>
              <div class="panel">
                <h3>–°–æ–±—ã—Ç–∏—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ)</h3>
                <div id="admin-events" class="log"></div>
              </div>
            </div>
          </div>

          <div id="admin-tab-rooms" class="tabpane hidden">
            <div class="row" style="justify-content:space-between">
              <div class="muted">–ö–ª–∏–∫–Ω–∏ –ø–æ –∫–æ–º–Ω–∞—Ç–µ, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏.</div>
              <button id="admin-refresh-rooms" class="ghost" type="button">–û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>
            <div id="admin-rooms" class="list"></div>
          </div>

          
          <div id="admin-tab-sandbox" class="tabpane hidden">
            <div class="panel">
              <h3>–ê–≤—Ç–æ—Ç–µ—Å—Ç (—Ä–µ–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞, –Ω–∞—Å—Ç–æ—è—â–∏–µ –±–æ—Ç—ã)</h3>
              <div class="muted">–°–æ–∑–¥–∞—ë—Ç —Ç–µ—Å—Ç–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç –±–æ—Ç–æ–≤, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –º–µ–º–æ–≤ (—Ñ–∞–π–ª/—Å—Å—ã–ª–∫–∞), –≥–æ–ª–æ—Å—É–µ—Ç –∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∏–≥—Ä—É. –í –∫–æ–Ω—Ü–µ ‚Äî –æ—Ç—á—ë—Ç –∏ –∏—Å—Ç–æ—Ä–∏—è —à–∞–≥–æ–≤.</div>

              <div class="grid2" style="margin-top:10px">
                <div>
                  <div class="row" style="justify-content:space-between; gap:10px; flex-wrap:wrap">
                    <label>–†–∞—É–Ω–¥–æ–≤:
                      <input id="admin-at-rounds" type="number" min="1" max="5" value="1" style="width:90px"/>
                    </label>
                    <label style="flex:1; min-width:220px">–¢–µ–º–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
                      <input id="admin-at-theme" type="text" placeholder="–ù–∞–ø—Ä.: ¬´—Ä–∞–±–æ—Ç–∞¬ª, ¬´–ß–µ—Ö–∏—è¬ª, ¬´–∏–Ω—Ç–µ—Ä–Ω–µ—Ç¬ª" />
                    </label>
                  </div>

                  <div class="btns" style="flex-wrap:wrap; gap:8px; margin-top:10px">
                    <button id="admin-at-run" class="primary" type="button">üöÄ –ë—ã—Å—Ç—Ä—ã–π –∞–≤—Ç–æ—Ç–µ—Å—Ç</button>
                    <button id="admin-at-step" class="secondary" type="button">‚è≠ –ü–æ—à–∞–≥–æ–≤—ã–π —Ç–µ—Å—Ç</button>
                    <button id="admin-at-cancel" class="danger" type="button" disabled>–°—Ç–æ–ø</button>
                  </div>

                  <div class="row" style="margin-top:10px; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap">
                    <div class="muted">–ö–æ–º–Ω–∞—Ç–∞: <b class="code" id="admin-at-room">‚Äî</b></div>
                    <div class="btns" style="gap:8px">
                      <button id="admin-at-copy" class="ghost" type="button" disabled>Copy report</button>
                      <button id="admin-at-clear" class="ghost" type="button">Clear</button>
                    </div>
                  </div>

                  <div class="muted" id="admin-at-status" style="margin-top:6px"></div>
                  <pre id="admin-at-report" class="testReport">‚Äî</pre>
                </div>

                <div>
                  <h3 style="margin-top:0">–ò—Å—Ç–æ—Ä–∏—è</h3>
                  <div id="admin-at-history" class="testHistory"></div>
                </div>
              </div>
            </div>

            <div class="panel" style="margin-top:14px">
              <h3>–ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (–Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã)</h3>
              <div class="grid2">
                <div>
                  <label>–ö–æ–º–Ω–∞—Ç:
                    <input id="admin-sb-rooms" type="number" min="1" max="20" value="3"/>
                  </label>
                  <label>–ò–≥—Ä–æ–∫–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç–µ:
                    <input id="admin-sb-players" type="number" min="1" max="12" value="4"/>
                  </label>
                  <label>–ú–µ–º–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç–µ:
                    <input id="admin-sb-memes" type="number" min="0" max="12" value="4"/>
                  </label>
                  <div class="btns">
                    <button id="admin-sb-generate" class="primary" type="button">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
                    <button id="admin-sb-reset" class="danger" type="button">–°–±—Ä–æ—Å–∏—Ç—å</button>
                  </div>
                  <div class="muted" id="admin-sb-status"></div>
                </div>
                <div>
                  <h3 style="margin-top:0">–ü–µ—Å–æ—á–Ω–∏—Ü–∞</h3>
                  <div id="admin-sb-list" class="list"></div>
                </div>
              </div>
            </div>

            <div class="panel" style="margin-top:14px">
              <h3>–°—Ç–µ–Ω–¥ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã (–¥–ª—è —Ç–µ—Å—Ç–∞ / –æ—Ç–ª–∞–¥–∫–∏)</h3>
              <div class="muted">‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç–µ. –≠—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è –º–µ–Ω—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã.</div>
              <div class="grid2" style="margin-top:10px">
                <div>
                  <label>–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã:
                    <input id="admin-rt-code" type="text" placeholder="ABCD" style="text-transform:uppercase" list="admin-roomcodes"/>
                  </label>
                  <div class="row" style="gap:10px; flex-wrap:wrap; margin-top:8px">
                    <label style="display:flex; align-items:center; gap:8px">
                      –ë–æ—Ç–æ–≤:
                      <input id="admin-rt-bots" type="number" min="1" max="20" value="2" style="width:90px"/>
                    </label>
                    <label style="display:flex; align-items:center; gap:8px">
                      <input id="admin-rt-bots-online" type="checkbox" checked/>
                      –ë–æ—Ç—ã online
                    </label>
                  </div>

                  <div class="btns" style="flex-wrap:wrap; gap:8px; margin-top:10px">
                    <button id="admin-rt-add-bots" class="primary" type="button">–î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–æ–≤</button>
                    <button id="admin-rt-fill-memes" class="ghost" type="button">–ó–∞–ø–æ–ª–Ω–∏—Ç—å –º–µ–º—ã</button>
                    <button id="admin-rt-reveal" class="ghost" type="button">–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–º—ã</button>
                    <button id="admin-rt-force-vote" class="primary" type="button">–ù–∞—á–∞—Ç—å vote</button>
                    <button id="admin-rt-auto-vote" class="ghost" type="button">–ê–≤—Ç–æ-–≥–æ–ª–æ—Å–∞</button>
                    <button id="admin-rt-reset-round" class="danger" type="button">–°–±—Ä–æ—Å–∏—Ç—å —Ä–∞—É–Ω–¥</button>
                  </div>

                  <div class="muted" id="admin-rt-status" style="margin-top:8px"></div>
                </div>

                <div>
                  <h3 style="margin-top:0">–ü–æ–¥—Å–∫–∞–∑–∫–∞</h3>
                  <div class="muted">
                    1) –°–æ–∑–¥–∞–π –∫–æ–º–Ω–∞—Ç—É –∫–∞–∫ –≤–µ–¥—É—â–∏–π (–æ–±—ã—á–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º).<br/>
                    2) –í—Å—Ç–∞–≤—å –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã —Å—é–¥–∞.<br/>
                    3) –î–æ–±–∞–≤—å –±–æ—Ç–æ–≤, –∑–∞–ø–æ–ª–Ω–∏ –º–µ–º—ã, –∑–∞–ø—É—Å—Ç–∏ vote –∏ –ø—Ä–æ–≤–µ—Ä—å UI/–ª–æ–≥–∏.
                  </div>
                </div>
              </div>

              <datalist id="admin-roomcodes"></datalist>
            </div>
          </div>
<div id="admin-tab-logs" class="tabpane hidden">
            <div class="row" style="justify-content:space-between">
              <input id="admin-log-filter" class="logfilter" placeholder="—Ñ–∏–ª—å—Ç—Ä: tag, room, nick..." />
              <button id="admin-copy-events" class="ghost" type="button">Copy JSON</button>
            </div>
            <div id="admin-log" class="log"></div>
          </div>
        </div>

        <div id="admin-room-overlay" class="overlay hidden">
          <div class="overlay-card wide">
            <div class="row">
              <h3 id="admin-room-title">–ö–æ–º–Ω–∞—Ç–∞</h3>
              <button id="admin-room-close" class="ghost">√ó</button>
            </div>
            <div id="admin-room-detail" class="admin-room-detail"></div>
          </div>
        </div>
      </section>
        <div id="admin-errors-modal" class="overlay hidden">
          <div class="overlay-card wide">
            <div class="row">
              <h3 id="admin-errors-title">–û—à–∏–±–∫–∏</h3>
              <div class="row" style="gap:8px">
                <button id="admin-errors-copy" class="ghost" type="button">Copy JSON</button>
                <button id="admin-errors-close" class="ghost" type="button">√ó</button>
              </div>
            </div>
            <div class="muted" id="admin-errors-hint" style="margin-top:6px"></div>
            <div id="admin-errors-body" class="errorsList"></div>
          </div>
        </div>

</main>
  </div>

  
  <button id="settings-toggle" class="settings-btn hidden">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
  <div id="settings-panel" class="settings hidden">
    <div class="settings-head">
      <b>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</b>
      <button id="settings-close" class="ghost">√ó</button>
    </div>
    <div class="settings-body">
      <div class="panel admin" id="admin-panel">
            <div class="row">
              <h3>Admin mode</h3>
              <label class="switch">
                <input id="admin-enabled" type="checkbox"/>
                <span class="sw"></span>
              </label>
            </div>
            <div class="muted">–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–ª–µ–µ—Ä–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.</div>

            <div class="admin-grid">
              <div>
                <label>–®–∏—Ä–∏–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ (px):
                  <input id="cal-card-w" type="range" min="240" max="900" step="10" value="520"/>
                  <span class="rangev" id="cal-card-wv">520</span>
                </label>

                <label>–í—ã—Å–æ—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ (px):
                  <input id="cal-card-h" type="range" min="220" max="900" step="10" value="520"/>
                  <span class="rangev" id="cal-card-hv">520</span>
                </label>


                <label>–ú–∞—Å—à—Ç–∞–± –ø–ª–µ–µ—Ä–∞ (zoom):
                  <div class="rangeRow">
                    <button id="cal-zoom-minus" class="miniBtn ghost" type="button">‚àí</button>
                    <input id="cal-zoom" type="range" min="0.10" max="2.0" step="0.01" value="1"/>
                    <button id="cal-zoom-plus" class="miniBtn ghost" type="button">+</button>
                    <span class="rangev" id="cal-zoomv">1.00</span>
                  </div>
                </label>

                <label>–ü—Ä–∏–≤—è–∑–∫–∞ (Y):
                  <select id="cal-anchor-y">
                    <option value="top">–≤–µ—Ä—Ö</option>
                    <option value="center">—Ü–µ–Ω—Ç—Ä</option>
                    <option value="bottom">–Ω–∏–∑</option>
                  </select>
                </label>

                
                <label>–†–∞–º–∫–∏ –ø–æ –∫—Ä–∞—è–º (px):
                  <input id="cal-crop-x" type="range" min="-600" max="600" step="2" value="0"/>
                  <span class="rangev" id="cal-crop-xv">0</span>
                </label>
<label>–û–±—Ä–µ–∑–∫–∞ —Å–Ω–∏–∑—É (px):
                  <input id="cal-crop-b" type="range" min="0" max="260" step="2" value="60"/>
                  <span class="rangev" id="cal-crop-bv">60</span>
                </label>

                <div class="btns">
                  <button id="cal-save" class="primary" type="button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                  <button id="cal-reset" class="ghost" type="button">–°–±—Ä–æ—Å</button>
                </div>
                <div class="muted" id="cal-save-status" style="margin-top:8px"></div>
              </div>

              <div>
                <div class="muted" style="margin-bottom:6px">–ü—Ä–µ—Å–µ—Ç—ã</div>
                <div class="btns">
                  <button id="cal-preset-desktop" class="secondary">–ü–ö / –±–æ–ª—å—à–æ–π —ç–∫—Ä–∞–Ω</button>
                  <button id="cal-preset-mobile" class="secondary">–ú–æ–±–∏–ª–∫–∞ (–≤–µ—Ä—Ç–∏–∫–∞–ª—å)</button>
                </div>
                <div class="muted" style="margin-top:10px">–°–æ–≤–µ—Ç: –≤—ã—Å—Ç–∞–≤—å –≤—ã—Å–æ—Ç—É —Ç–∞–∫, —á—Ç–æ–±—ã –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –æ—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –≤–∏–¥–µ–æ, –∞ –Ω–∏–∑ TikTok —É—à—ë–ª –∑–∞ –∫—Ä–∞–π —á–µ—Ä–µ–∑ ¬´–û–±—Ä–µ–∑–∫–∞ —Å–Ω–∏–∑—É¬ª.</div>

                <div class="muted" style="margin-top:14px; margin-bottom:6px">–ö–∞–ª–∏–±—Ä–æ–≤–æ—á–Ω–æ–µ –≤–∏–¥–µ–æ (TikTok)</div>
                <div id="cal-preview" class="cal-preview"></div>
                <div class="btns" style="margin-top:10px">
                  <button id="cal-open-video" class="ghost" type="button">–û—Ç–∫—Ä—ã—Ç—å –∫–∞–ª–∏–±—Ä–æ–≤–æ—á–Ω–æ–µ –≤–∏–¥–µ–æ</button>
                </div>
              </div>
            </div>
          </div>
    </div>
  </div>

<button id="debug-toggle" class="debug-btn">DEBUG</button>
  <div id="debug-panel" class="debug hidden">
    <div class="debug-head">
      <b>DEBUG</b>
      <div class="debug-actions">
        <button id="debug-copy" class="ghost">Copy</button>
      <button id="debug-download" class="ghost" title="–°–∫–∞—á–∞—Ç—å JSON">‚¨áÔ∏è</button>
        <button id="debug-download-zip" class="ghost" title="–°–∫–∞—á–∞—Ç—å ZIP (host+players+server)">üóúÔ∏è</button>
        <button id="debug-clear" class="ghost">Clear</button>
      </div>
      <button id="debug-close" class="ghost">√ó</button>
    </div>

    <!-- [ANCHOR] MB:DEBUG:PANEL_CONTROLS -->
    <div class="debug-sub">
      <label class="dbgchk">
        <input type="checkbox" id="debug-enabled" checked>
        <span>DEBUG</span>
      </label>
      <div id="debug-room-state" class="muted">Room debug: ‚Äî</div>
      <div class="debug-sub-actions">
        <button id="debug-snapshot" class="ghost" title="Fetch server timeline snapshot">Snapshot</button>
        <button id="debug-tl-clear" class="ghost" title="Clear server timeline">Clear TL</button>
      </div>
    </div>
    <div id="debug-timeline" class="debug-timeline"></div>

    <div id="debug-body" class="debug-body"></div>
  </div>


  <div id="qr-overlay" class="overlay hidden">
    <div class="overlay-card">
      <div class="row">
        <h3>QR –¥–ª—è –≤—Ö–æ–¥–∞</h3>
        <button id="qr-close" class="ghost">√ó</button>
      </div>
      <img id="qr-overlay-img" class="qrimg big" alt="QR"/>
      <div class="muted" id="qr-overlay-link">‚Äî</div>
      <div class="btns" style="margin-top:10px">
        <button id="qr-copy" class="secondary">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
      </div>
    </div>
  </div>


  <script src="/socket.io/socket.io.js"></script>
  <script src="./script.js?v=0.1.18"></script>
  <div id="winner-overlay" class="overlay hidden wsStage" aria-hidden="true">
    <!-- Background rotating shapes (20% opacity) -->
    <div class="wsBg" aria-hidden="true">
      <div class="wsSpin">
        <div class="wsShape wsCircle"></div>
        <div class="wsShape wsSquare"></div>
        <div class="wsShape wsDiamond"></div>
      </div>
      <div id="winner-confetti" class="wsConfetti"></div>
    </div>

    <!-- Foreground content -->
    <div class="wsContent">
      <div class="wsHeader">
        <div id="winner-title" class="wsTitle">ROUND WINNER</div>
        <div class="wsLine"></div>
      </div>

      <div id="winner-emoji" class="wsEmoji">üèÜ</div>

      <div id="winner-cards" class="wsCards"></div>

      <!-- [ANCHOR] MB:WINNER:PLAYER_CONTROLS -->
      <div id="winner-player-controls" class="wsPlayerControls hidden">
        <button id="winner-player-next-round" class="primary wsPlayerBtn">–ì–æ—Ç–æ–≤</button>
        <div id="winner-player-next-wait" class="wsPlayerWait muted"></div>
      </div>

      <!-- [ANCHOR] MB:WINNER:HOST_CONTROLS -->
      <div id="winner-host-controls" class="wsHostControls hidden">
        <div id="winner-host-mini-stats" class="wsHostMiniStats"></div>
        <button id="winner-host-next-round" class="primary wsHostBtn">–°–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥ (—Ö–æ—Å—Ç)</button>
      </div>

    </div>
  </div>

  <!-- [ANCHOR] MB:HTML:FINAL_OVERLAY -->
  <div id="final-overlay" class="overlay hidden fsStage" aria-hidden="true">
    <!-- Decorative background elements -->
    <div class="fsDeco" aria-hidden="true">
      <div class="fsDecoCircle"></div>
      <div class="fsDecoSquare"></div>
    </div>

    <!-- Host action -->
    <button id="final-host-new-game" class="secondary fsNewGameBtn" type="button">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>

    <div class="fsWrap">
      <!-- Header -->
      <div class="fsHeader">
        <div class="fsTitle">FINAL RESULTS</div>
        <div class="fsLine"></div>
      </div>

      <!-- Main grid -->
      <div class="fsGrid">
        <!-- Left: Champion -->
        <div class="fsLeft">
          <div class="fsWinnerWrap">
            <div class="fsSpotlight" aria-hidden="true"></div>

            <div class="fsFrame">
              <div class="fsCard">
                <div id="final-crown" class="fsCrown" aria-hidden="true">üëë</div>
                <div class="fsChampion">CHAMPION</div>
                <div id="final-winner-name" class="fsWinnerName">‚Äî</div>
                <div class="fsPts"><span id="final-winner-score">0</span> PTS</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Right: Leaderboard -->
        <div class="fsRight">
          <div class="fsTopTitle">TOP 3</div>
          <div id="final-top3" class="fsTop3"></div>

          <div id="final-rest-wrap" class="fsRestWrap hidden">
            <div class="fsOtherTitle">OTHER PLAYERS</div>
            <div id="final-rest" class="fsRest"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>
